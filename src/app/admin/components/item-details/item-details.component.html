

    <!--bread curmb start-->
<div class="page-top-info">
    <br><br>
    <div class="container">
        
         
        <div class="site-pagination">  <h4>{{'Items'|translate}}</h4> 
            <nav aria-label="breadcrumb" >
               <ol class="breadcrumb">
                 <li class="breadcrumb-item"><a style="cursor: pointer  !important;" [routerLink]="['/dashboard']">Home</a></li>
                 <li class="breadcrumb-item"><a  class="pointer" [routerLink]="['/Items']">Items</a></li>
                 <li class="breadcrumb-item active" *ngIf="item.id ==0" aria-current="page">  Add Item</li>
                 <li class="breadcrumb-item active" *ngIf="item.id > 0" aria-current="page"> Edit Item</li>
   
               </ol>
             </nav>
             
           </div> 
    </div>
</div>
<!--bread curmb end-->
<section class="category-section mt-5">
    <div class="container">
        <div class="row">
            <mat-horizontal-stepper labelPosition="bottom" [linear]="true" style="width: 100%;" #stepper>
                <mat-step [stepControl]="firstFormGroup">
                    <form [formGroup]="firstFormGroup">
                        <ng-template matStepLabel>{{'Main-Info'|translate}}</ng-template>
                        <div class="row">
                            <div class="col-sm-10 offset-sm-1  pt-5 ">
                                <mat-form-field>
                                    <input matInput autocomplete="off" formControlName="name"
                                        placeholder="{{'Name'|translate}}">
                                    <mat-error *ngFor="let validation of firstFormGroup_validation_messages.name">
                                        <mat-error translate
                                            *ngIf="firstFormGroup.get('name').hasError(validation.type) && (firstFormGroup.get('name').dirty || firstFormGroup.get('name').touched)">
                                            {{validation.message|translate}}</mat-error>
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="col-sm-10 offset-sm-1 pt-5">
                                <label>description</label>
                                    <ckeditor [editor]="Editor" autocomplete="off" formControlName="description"
                                     ></ckeditor>   

                                    <mat-error
                                        *ngFor="let validation of firstFormGroup_validation_messages.description">
                                        <mat-error translate
                                            *ngIf="firstFormGroup.get('description').hasError(validation.type) && (firstFormGroup.get('description').dirty || firstFormGroup.get('description').touched)">
                                            {{validation.message|translate}}</mat-error>
                                    </mat-error>
                                
                                
                            </div>
                            <div class="col-sm-4 pt-3 offset-sm-1  pt-5 pb-5">
                                <mat-label> {{'Please check If The Item is in best Selling'|translate}}</mat-label>
                                <br>
                                    <mat-checkbox  type="checkbox"   formControlName="isBestSelling"></mat-checkbox>
                                    is Best Selling
                                    <span class="checkmark">
                                    </span> 
                            </div>
                            <div class="col-sm-4  pt-3   pt-5  pb-5">
                                <mat-label> {{'Please check If The Item is in On Sale '|translate}}</mat-label>
                                <br>
                                    <mat-checkbox  type="checkbox"   formControlName="isOnSale"></mat-checkbox>
                                    is On Sale Product 
                                    <span class="checkmark">
                                    </span> 
                            </div>
                            <div class="col-sm-2  pt-3   pt-5  pb-5">
                                <mat-label> {{'Status'|translate}}</mat-label>
                                <br>
                                    <mat-checkbox  type="checkbox"   formControlName="hide"></mat-checkbox>
                                   hide Product
                                    <span class="checkmark">
                                    </span> 
                            </div>
                        </div>
                        <div>
                            <button mat-raised-button color="primary" matStepperNext>{{'Next'|translate}}</button>
                        </div>
                    </form>
                </mat-step>
                <mat-step [stepControl]="middleFormGroup">
                    <form [formGroup]="middleFormGroup">
                        <ng-template matStepLabel>{{'Product-details'|translate}}</ng-template>
                        <div class="row">
                            <div class="col-sm-5  offset-sm-1 ">
                                <mat-form-field>
                                    <mat-label> -- {{'Please-select-item-type'|translate}} --</mat-label>
                                    <mat-select formControlName="type">
                                        <mat-option *ngFor="let item of typeList" [value]="item.key">
                                            {{item.value}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                
                                
                            </div>
                            <div class="col-sm-5">
                                <mat-form-field>
                                    <mat-label> -- {{'Please-select-nation'|translate}} --</mat-label>
                                    <mat-select formControlName="nationID">
                                        <mat-option *ngFor="let item of nations" [value]="item.id">
                                            {{item.name|langPipe:item.nameAr}}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error
                                        *ngFor="let validation of firstFormGroup_validation_messages.companyBrandID">
                                        <mat-error translate
                                            *ngIf="middleFormGroup.get('nationID').hasError(validation.type) && (middleFormGroup.get('nationID').dirty || middleFormGroup.get('nationID').touched)">
                                            {{validation.message}}</mat-error>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4  offset-sm-1">
                                <mat-form-field>
                                    <mat-label> -- {{'Please-select-Brand'|translate}} --</mat-label>
                                    <mat-select formControlName="companyBrandID">

                                        <mat-option *ngFor="let item of brands" [value]="item.id">
                                            {{item.name|langPipe:item.nameAr}}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error
                                        *ngFor="let validation of firstFormGroup_validation_messages.companyBrandID">
                                        <mat-error translate
                                            *ngIf="middleFormGroup.get('companyBrandID').hasError(validation.type) && (middleFormGroup.get('companyBrandID').dirty || middleFormGroup.get('companyBrandID').touched)">
                                            {{validation.message}}</mat-error>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">

                                <mat-form-field style="width: 100%;">
                                    <input matInput autocomplete="off" type="number" formControlName="stockCount"
                                        placeholder="{{'stockCount'|translate}}">
                                        <mat-error *ngFor="let validation of firstFormGroup_validation_messages.stockCount">
                                            <mat-error translate
                                                *ngIf="middleFormGroup.get('stockCount').hasError(validation.type) && (middleFormGroup.get('stockCount').dirty || middleFormGroup.get('stockCount').touched)">
                                                {{validation.message|translate}}</mat-error>
                                        </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">

                                <mat-form-field style="width: 100%;">
                                    <input matInput autocomplete="off" type="number" formControlName="price"
                                        placeholder="{{'Price'|translate}}">
                                    <mat-error *ngFor="let validation of firstFormGroup_validation_messages.price">
                                        <mat-error translate
                                            *ngIf="middleFormGroup.get('price').hasError(validation.type) && (middleFormGroup.get('price').dirty || middleFormGroup.get('price').touched)">
                                            {{validation.message|translate}}</mat-error>
                                    </mat-error>
                                </mat-form-field>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-sm-5  offset-sm-1">
                                <mat-form-field>
                                    <input matInput autocomplete="off" formControlName="code"
                                        placeholder="{{'Code'|translate}}">
                                    <mat-error *ngFor="let validation of firstFormGroup_validation_messages.code">
                                        <mat-error translate
                                            *ngIf="middleFormGroup.get('code').hasError(validation.type) && (middleFormGroup.get('code').dirty || middleFormGroup.get('code').touched)">
                                            {{validation.message|translate}}</mat-error>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-5">
                                <mat-form-field style="width: 100%;">
                                    <input matInput autocomplete="off" formControlName="modelNumber"
                                        placeholder="{{'Model-number'|translate}}">
                                    <!-- <mat-error *ngFor="let validation of firstFormGroup_validation_messages.modelNumber">
                                        <mat-error translate
                                            *ngIf="middleFormGroup.get('modelNumber').hasError(validation.type) && (middleFormGroup.get('modelNumber').dirty || middleFormGroup.get('modelNumber').touched)">
                                            {{validation.message|translate}}</mat-error>
                                    </mat-error> -->
                                </mat-form-field>
                            </div>

                        </div>
                        <!-- <div class="row">
                            <div class="col-sm-10  offset-sm-1">
                                <mat-form-field style="width: 100%;">
                                    <input matInput autocomplete="off" formControlName="videoUrl"
                                        placeholder="Video Url">

                                </mat-form-field>
                            </div>
                            <div class="col-sm-5  offset-sm-1">
                                <mat-form-field>
                                    <textarea matInput autocomplete="off" formControlName="metaKeys"
                                        placeholder="{{'metaKeys'|translate}}"> </textarea>
                                    <mat-error
                                        *ngFor="let validation of firstFormGroup_validation_messages.description">
                                        <mat-error
                                            *ngIf="middleFormGroup.get('metaKeys').hasError(validation.type) && (middleFormGroup.get('metaKeys').dirty || middleFormGroup.get('metaKeys').touched)">
                                            {{validation.message|translate}}</mat-error>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-5">
                                <mat-form-field>
                                    <textarea matInput type="text" autocomplete="off" formControlName="metaKeysAR"
                                        placeholder="{{'metaKeysAR'|translate}}"></textarea>
                                    <mat-error
                                        *ngFor="let validation of firstFormGroup_validation_messages.description">
                                        <mat-error
                                            *ngIf="middleFormGroup.get('metaKeysAR').hasError(validation.type) && (middleFormGroup.get('metaKeysAR').dirty || middleFormGroup.get('metaKeysAR').touched)">
                                            {{validation.message|translate}}</mat-error>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div> -->
                        <div class="row">
                            <div class="col-sm-12">
                                <app-image-upload 
                                (complete)="onItemImagesComplete($event)" 
                                (setCoverPhoto)="setCoverPhoto($event)" 
                                [iconName]="item.iconName" 
                                [itemImages]="item.itemImages"
                                    text="Upload Prouct Photos" 
                                    target="ProductImages" 
                                    allowMulti="true">
                                </app-image-upload>
                            </div>
                            <!-- <div class="col-sm-5 ">
                                <app-file-upload (complete)="onProductFileComplete($event)"
                                    [documentUrl]="item.documentUrl"
                                    [text]="item.documentUrl == null ? 'Upload Prouct File' : 'Change Product File '"
                                    target="ProductImages"></app-file-upload>
                            </div> -->
                        </div>
                        <br>
                        <div>
                            <button matStepperPrevious mat-raised-button color="default">{{'Back'|translate}}</button>
                            <button matStepperNext mat-raised-button color="primary">{{'Next'|translate}}</button>
                        </div>
                    </form>
                </mat-step>
                <mat-step [stepControl]="thirdFromGroup">
                    <form [formGroup]="thirdFromGroup">
                        <ng-template matStepLabel>{{'Select-category'|translate}}</ng-template>
                        <section class="category-section">
                            <div class="container">
                                <mat-form-field>
                                    <input matInput (keyup)="search($event.target.value)"
                                        placeholder="{{'Search'|translate}}">
                                </mat-form-field>

                                <div class="mat-elevation-z8">
                                    <table mat-table [dataSource]="categoryDataSource" matSort>
                                        <!-- Checkbox Column -->
                                        <ng-container matColumnDef="select">

                                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                                {{'Select'|translate}} </th>


                                            <td mat-cell *matCellDef="let row">
                                                <mat-checkbox (click)="$event.stopPropagation()"
                                                    (change)="$event ? selectRow($event,row): null"
                                                    [checked]="selection.isSelected(row)"
                                                    [aria-label]="checkboxLabel(row)">
                                                </mat-checkbox>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="No">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'No.'|translate}}
                                            </th>
                                            <td mat-cell *matCellDef="let row; let i = index;">{{row.id}}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="Name">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Name'|translate}}
                                            </th>
                                            <td mat-cell *matCellDef="let row">
                                              <span *ngIf="row?.parentCategoryID !== 0">
                                                {{row.parentCategoryName}} >>
                                              </span>
                                              {{row.name}} </td>
                                            </ng-container>

                                        
                                        <tr mat-header-row *matHeaderRowDef="displayedColumnsCategory"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumnsCategory;"></tr>
                                    </table>

                                    <mat-paginator [pageSizeOptions]="[10, 20,100]"></mat-paginator>
                                </div>
                            </div>
                        </section>
                        <br>
                    </form>
                    <div class="table-actions" style="text-align: center">

                        <button mat-raised-button color="primary" style="margin-right: 10px;" (click)="save()"
                            [disabled]="firstFormGroup.invalid">
                            <mat-icon>save</mat-icon> <label> {{'Save'|translate}} </label>
                        </button>

                        <button mat-raised-button color="primary" style="margin-right: 10px;" (click)="deleteItem()">
                            <mat-icon>delete_forever</mat-icon> <label> {{'Delete'|translate}} </label>
                        </button>

                        <button mat-raised-button color="primary" style="margin-right: 10px;" type="button"
                            (click)="cancel()">
                            <mat-icon>cancel</mat-icon> <label> {{'Cancel'|translate}} </label>
                        </button>

                    </div>

                    <ng-template matStepLabel>{{'Save'|translate}}</ng-template>
                    <div>
                        <button matStepperPrevious mat-raised-button color="primary">{{'Back'|translate}}</button>
                        <button (click)="stepper.reset()" mat-raised-button
                            color="warning">{{'Reset'|translate}}</button>
                    </div>
                </mat-step>
            </mat-horizontal-stepper>
        </div>
    </div>
</section>