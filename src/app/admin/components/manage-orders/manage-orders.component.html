<!--bread curmb start-->
<div class="page-top-info" id="top-info">
    <br><br>
    <div class="container">
        
         <div class="site-pagination">  <h4>{{'Orders'|translate}}</h4> 
         <nav aria-label="breadcrumb" >
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a  [routerLink]="['/dashboard']">Home</a></li>
              <li class="breadcrumb-item"><a  [routerLink]="['/Orders']">Orders</a></li>
            </ol>
          </nav>
          
        </div> 
        
    </div>
</div>
<!--bread curmb end-->
<section class="category-section " *ngIf="showOrders==true">
    <div class="container">

        <mat-form-field class="mt-3">
            <input matInput (keyup)="search($event.target.value)" placeholder="Search">
            <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>


        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="OrderId">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="orderNumber"> Order Number </th>
                    <td mat-cell *matCellDef="let row"> <a class="red-color" mat-button (click)="GetOrderItems(row.id)"
                            color="accent">{{row.orderNumber}}</a></td>
                </ng-container>

                <ng-container matColumnDef="CustomerName">
                    <th mat-header-cell *matHeaderCellDef > Customer Name </th>
                    <td mat-cell *matCellDef="let row"> {{row.client.name}} </td>
                </ng-container>

                <ng-container matColumnDef="OrderDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="lastUpdatedDate" class="hide-xs"> Order Date </th>
                    <td mat-cell *matCellDef="let row" class="hide-xs"> {{row.lastUpdatedDate | date}} </td>
                </ng-container>

                <ng-container matColumnDef="TotalPrice">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="totalPaid" class="hide-xs"> Total Price </th>
                    <td mat-cell *matCellDef="let row" class="hide-xs"> {{row.totalPaid }} </td>
                </ng-container>
                <ng-container matColumnDef="Currency">
                    <th mat-header-cell *matHeaderCellDef  class="hide-xs">
                        {{'Currency'|translate}} </th>
                    <td mat-cell *matCellDef="let row" class="hide-xs">
                        {{row.currency == 1 ?'EGP' :'USD' }}</td>
                </ng-container>
                <ng-container matColumnDef="TotalDiscount">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="totalDiscount" class="hide-xs"> Total Discount </th>
                    <td mat-cell *matCellDef="let row" class="hide-xs"> {{row.totalDiscount }} </td>
                </ng-container>
               
                <ng-container matColumnDef="PaymentType">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="paymentMethod" class="hide-xs"> Payment Type </th>
                    <td mat-cell *matCellDef="let row" class="hide-xs"> {{PaymentEnum[row.paymentMethod]}} </td>
                </ng-container>

                <ng-container matColumnDef="OrderStatus">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="orderStatus" class="hide-xs"> Order Status</th>
                    <td mat-cell *matCellDef="let row" class="hide-xs"> {{OrderStatusEnum[row.orderStatus]}} </td>
                </ng-container>



                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <div *ngIf="dataSource.filteredData.length === 0">
                <p class="text-center">No Records Found!</p> 
            </div>
            <mat-paginator [pageSizeOptions]="[10, 20,100]"></mat-paginator>
        </div>
    </div>

</section>

<section class="category-section" *ngIf="showOrders==false">

    <div class="container">
        <div class="row mr-2 ml-2">
            <!-- <form [formGroup]="orderForm"> -->
            <div class="col-sm-12 mt-3">

                <div class="checkout-form">
                    <div class="cf-title" translate>Main Order Info </div>
                </div>
                <div class="row ">
                    <div class="col-lg-3">
                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="{{'orderNumber'|translate}}"
                                [(ngModel)]="order.orderNumber" type="text" />
                        </mat-form-field>
                    </div>

                    <div class="col-lg-3">

                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="{{'clientName'|translate}}"
                                [(ngModel)]="order.client.name" type="text" />
                        </mat-form-field>

                    </div>

                    <div class="col-lg-3">
                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="{{'paymentMethod'|translate}}"
                                value="{{PaymentEnum[order.paymentMethod]}}" type="text" />
                        </mat-form-field>
                    </div>

                    <div class="col-lg-3">
                        <mat-form-field class="ApplyFullWidth">
                            <mat-label> Order Status</mat-label>
                            <mat-select [(ngModel)]="order.orderStatus">
                                <mat-option *ngFor="let Status of statusList" [value]="Status.key">
                                    {{Status.value}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                </div>

                <div class="row ">
                    <div class="col-lg-3">
                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="Order Date"
                                [ngModel]="order.lastUpdatedDate | date" type="text" />
                                
                        </mat-form-field>
                    </div>

                    <div class="col-lg-3">

                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="Total Price"
                                [(ngModel)]="order.totalPaid" type="text" />
                        </mat-form-field>

                    </div>                 

                    <div class="col-lg-3">

                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="Total Discount"
                                [(ngModel)]="order.totalDiscount" type="text" />
                        </mat-form-field>
                    </div>
                    <div class="col-lg-3">
                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="Shipping fees"
                                value="25" type="text" />
                        </mat-form-field>

                    </div>
                    <div class="col-lg-3">
                        <mat-form-field class="ApplyFullWidth">
                            <input matInput disabled="true" placeholder="Currency"
                               class="text-dark"  [value]="CurrencyEnum[order.currency]" type="text" />
                        </mat-form-field>

                    </div>
                </div>
            </div>
            <!-- </form> -->

            <div class="col-sm-12 mt-3">
                <table mat-table [dataSource]="dataSourceItems" class="cart-table" matSort
                    style="width: -webkit-fill-available;">

                    <ng-container matColumnDef="ProductImg">
                        <th mat-header-cell *matHeaderCellDef > {{'Product'|translate}} </th>
                        <td mat-cell *matCellDef="let row">
                            <a mat-button [routerLink]="['/Product/',row.item.id]">
                                <img [src]="row.item.iconName == null ? './assets/img/defult img.jpg' : row.item.iconName"
                                    style="width:150px;height: 150px;object-fit: cover; " >
                            </a>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="ProductName">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let row"><a mat-button
                                [routerLink]="['/Product/',row.item.id]">{{row.item.name|langPipe:row.item.nameAr}}</a>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="TotalPrice">
                        <th mat-header-cell *matHeaderCellDef  class="hide-xs">
                            {{'Total-price'|translate}} </th>
                        <td mat-cell *matCellDef="let row" class="hide-xs">
                            {{row.quantity }} X   {{row.itemPriceValue }}</td>
                    </ng-container>
                    <!-- <ng-container matColumnDef="Currency">
                        <th mat-header-cell *matHeaderCellDef  class="hide-xs">
                            {{'Currency'|translate}} </th>
                        <td mat-cell *matCellDef="let row" class="hide-xs">
                            {{row.currency == 1 ?'EGP' :'USD' }}</td>
                    </ng-container> -->
                    <!-- <ng-container matColumnDef="delete">
                        <th mat-header-cell *matHeaderCellDef class="hide-xs"> {{'Delete'|translate}}
                        </th>
                        <td mat-cell *matCellDef="let row" class="hide-xs">
                            <a (click)='row.recordStatus=2'>
                                <mat-icon color="primary" (click)="deleteOrderItem(row)" title="{{'Delete'|translate}}">
                                    delete_forever</mat-icon>
                            </a>

                        </td>
                    </ng-container> -->

                    <tr mat-header-row *matHeaderRowDef="displayedColumnsItems"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumnsItems;"></tr>
                </table>

            </div>


            <div class="col-sm-12  text-center mt-3">
                <button class="mat-raised-button mat-button-base mat-primary mr-2" style="cursor: pointer;"
                    (click)="save()">Save</button>
                <a class="mat-raised-button mat-button-base mat-primary  mr-2" style="cursor: pointer;"
                href="/Orders">Back</a>


            </div>
        </div>
    </div>


</section>
<script>document.getElementById('top-info').scrollIntoView(true);</script>
